

-- Ventajas:
-- - Evita duplicidad de datos
-- - Mejora integridad referencial
-- - Facilita mantenimiento y actualizaciones

-- 1FN: Eliminar grupos repetitivos y asegurar que cada campo tenga valores atómicos.
-- 2FN: Separar los datos que dependen parcialmente de la clave primaria (crear nuevas tablas).
-- 3FN: Eliminar dependencias transitivas (atributos que no dependen directamente de la clave primaria).

DROP TABLE ALUMNO;
DROP TABLE MATERIA
DROP TABLE DOCENTE;
DROP TABLE ALUMNO_MATERIA;
DROP TABLE CARRERA;




CREATE TABLE CARRERA (
    ID_CARRERA NUMBER,
    NOMBRE_CARRERA VARCHAR2(100),
    CONSTRAINT CARRERA_PK PRIMARY KEY (ID_CARRERA)
    ----PONER CONSTRAINT 
);
ALTER TABLE CARRERA RENAME COLUMN NOMBRE_CARRERA TO NOMBRE;


--  DOCENTE
CREATE TABLE DOCENTE (
    ID_DOCENTE NUMBER,
    NOMBRE_DOCENTE VARCHAR2(100),
    CONSTRAINT DOCENTE_PK PRIMARY KEY (ID_DOCENTE)
     ----PONER CONSTRAINT 
);

-- MATERIA
CREATE TABLE MATERIA (
    ID_MATERIA NUMBER,
    NOMBRE_MATERIA VARCHAR2(100) ,
    CREDITOS NUMBER,
    DOCENTE_ID NUMBER, ---DOCENTE_ID 
    
    CONSTRAINT MATERIA_PK PRIMARY KEY (ID_MATERIA)
    
);

-- ALUMNO 
CREATE TABLE ALUMNO (
    ID_ALUMNO NUMBER,
    NOMBRE VARCHAR2(50) ,
    APELLIDO VARCHAR2(50) ,
    CARRERA_ID NUMBER,-----CARRERA_ID 
    
    CONSTRAINT ALUMNO_PK PRIMARY KEY (ID_ALUMNO),
    CONSTRAINT ALUMNO_FK FOREIGN KEY (CARRERA_ID) REFERENCES CARRERA (ID_CARRERA)
    ---- CONTRAINT DE CLAVE FORANEA Y PRIMARY
  
);


-- TABLA INTERMEDIA DE MUCHOS A MUCHOS 
CREATE TABLE ALUMNO_MATERIA (
    ALUMNO_ID NUMBER,
    MATERIA_ID NUMBER,

    CONSTRAINT ALUMNO_MATERIA_PK PRIMARY KEY (ALUMNO_ID, MATERIA_ID),

    CONSTRAINT ALUMNO_MATERIA_FK1 FOREIGN KEY (ALUMNO_ID)
        REFERENCES ALUMNO(ID_ALUMNO),

    CONSTRAINT ALUMNO_MATERIA_FK2 FOREIGN KEY (MATERIA_ID)
        REFERENCES MATERIA(ID_MATERIA)
);
DROP TABLE ALUMNO_MATERIA;

SELECT * FROM CARRERA;
SELECT * FROM DOCENTE;
SELECT * FROM MATERIA;
SELECT * FROM ALUMNO;
SELECT * FROM ALUMNO_MATERIA;

----INSERTAR ALUMNOS 
INSERT INTO ALUMNO VALUES (1005, 'Pedro', 'Ramírez', 1);
INSERT INTO ALUMNO VALUES (1005, 'Pedro', 'Ramírez', 1);


---INSERTAR MATERIA

INSERT INTO ALUMNO_MATERIA VALUES (1005, 101);  -- PROGRAMACION I
INSERT INTO ALUMNO_MATERIA VALUES (1005, 102);  -- ANATOMIA
INSERT INTO ALUMNO_MATERIA VALUES (1005, 102);  -- ANATOMIA
INSERT INTO ALUMNO_MATERIA VALUES (1002, 101);  -- ANATOMIA
INSERT INTO ALUMNO_MATERIA VALUES (1002, 103);  -- ANATOMIA



---INTOS 
INSERT INTO CARRERA VALUES (1, 'Ingeniería en Sistemas');
INSERT INTO CARRERA VALUES (2, 'Medicina');
INSERT INTO CARRERA VALUES (3, 'Derecho');


INSERT INTO DOCENTE VALUES (1, 'Dr. Carlos Mendoza');
INSERT INTO DOCENTE VALUES (2, 'Mtra. Laura Pérez');
INSERT INTO DOCENTE VALUES (3, 'Lic. Juan López');

INSERT INTO MATERIA VALUES (101, 'Programación I', 8, 1);
INSERT INTO MATERIA VALUES (102, 'Anatomía Humana', 10, 2);
INSERT INTO MATERIA VALUES (103, 'Derecho Constitucional', 7, 3);


INSERT INTO ALUMNO VALUES (1001, 'Juan', 'Pérez', 1); -- Ingeniería
INSERT INTO ALUMNO VALUES (1002, 'Ana', 'Gómez', 2);   -- Medicina
INSERT INTO ALUMNO VALUES (1003, 'Luis', 'Martínez', 3); -- Derecho
INSERT INTO ALUMNO VALUES (1004, 'María', 'Fernández', 1);


-- Juan en Programación I
INSERT INTO ALUMNO_MATERIA VALUES (1001, 101);
-- Ana en Anatomía
INSERT INTO ALUMNO_MATERIA VALUES (1002, 102);
-- Luis en Derecho Constitucional
INSERT INTO ALUMNO_MATERIA VALUES (1003, 103);
-- María en Programación I
INSERT INTO ALUMNO_MATERIA VALUES (1004, 101);
-- Juan también en Anatomía
INSERT INTO ALUMNO_MATERIA VALUES (1001, 102);